<!DOCTYPE html>

<head>
    <title>Evades Randomizer</title>
    <link rel="stylesheet" href="../assets/css/evades.css">
</head>

<body>
    <label for="count">Amount of heroes:</label>
    <input type="number" id="count" min="1" max="100" value="1"><br>

    <button id="show-more-options">More options</button><br>
    <div hidden id="more-options">
        <div title="If unchecked, hard varients of maps (ie. Central Core Hard) will not appear.">
            <label for="hard-varients">Include hard varients?</label>
            <input type="checkbox" id="hard-varients" checked=true><br>
        </div>
        
        <div title="If checked, any map more than 40 levels long are excluded. Restless Ridge and Frozen Fjord (Hard) are also considered long.">
            <label for="short-maps-only">Short maps only?</label>
            <input type="checkbox" id="short-maps-only" checked=false><br>
        </div>
    </div>

    <button id="roll">Random</button><br><br>
    <div id="output">Output will appear here...</div><br>

    Go to <a href="https://evades.io/">Evades.io</a> or
    <button id="game">press to play here</button>
    <div hidden id="gamediv">
        <iframe src="https://evades.io/" width="1280" height="720" allowfullscreen="true" name="Evades" id="evades"></iframe>
    </div><br>
</body>

<script type="module">
    import { randomFromArray, swapElementVisibility } from '../assets/js/functions.js';

    const maps = [
        "Central Core",
        "Vicious Valley",
        "Elite Expanse",
        "Wacky Wonderland",
        "Glacial Gorge",
        "Dangerous District",
        "Peculiar Pyramid (Inner/Outer)",
        "Peculiar Pyramid Perimeter",
        "Monumental Migration (120)",
        "Humongous Hollow",
        "Haunted Halls",
        "Quiet Quarry",
        "Frozen Fjord",
        "Restless Ridge",
        "Toxic Territory",
        "Magnetic Monopole",
        "Magnetic Monopole Diapoles",
        "Assorted Alcove",
        "Burning Bunker",
        "Central Core Hard",
        "Vicious Valley Hard",
        "Glacial Gorge Hard",
        "Assorted Alcove Hard",
        "Frozen Fjord Hard"
    ];

    const shortMaps = [
        "Central Core",
        "Vicious Valley",
        "Glacial Gorge",
        "Peculiar Pyramid (Inner/Outer)",
        "Peculiar Pyramid Perimeter",
        "Haunted Halls",
        "Toxic Territory",
        "Magnetic Monopole",
        "Magnetic Monopole Diapoles",
        "Assorted Alcove",
        "Burning Bunker",
        "Central Core Hard",
        "Vicious Valley Hard",
        "Glacial Gorge Hard",
        "Assorted Alcove Hard"
    ];

    const heroes = [
        "Magmax",
        "Rime",
        "Morfe",
        "Aurora",
        "Necro",
        "Brute",
        "Nexus",
        "Shade",
        "Euclid",
        "Chrono",
        "Reaper",
        "Rameses",
        "Jolt",
        "Ghoul",
        "Cent",
        "JÃ¶tunn",
        "Candy",
        "Mirage",
        "Boldrock"
    ];

    document.getElementById("roll").onclick = function() {
        const count = parseInt(document.getElementById("count").value);

        let localmaps = maps;
        if(document.getElementById("short-maps-only").checked) localmaps = shortMaps;

        let map = randomFromArray(localmaps);
        if(!document.getElementById("hard-varients").checked) map = randomFromArray(localmaps.filter(s => !s.includes(" Hard")));

        let string = `Your map is: <b>${map}</b>`;
        for (let i = 0; i < count; i++) {
            const hero = randomFromArray(heroes);
            string += `<br>Hero ${i+1}: ${hero}`;
        };

        document.getElementById("output").innerHTML = string;
    };

    document.getElementById("show-more-options").onclick = () => swapElementVisibility("more-options", { id: "show-more-options", true: "Show more options", false: "Hide more options" });
    document.getElementById("game").onclick = () => swapElementVisibility("gamediv");
</script>